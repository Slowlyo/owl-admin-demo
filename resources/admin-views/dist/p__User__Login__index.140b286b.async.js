"use strict";(self.webpackChunkslow_admin=self.webpackChunkslow_admin||[]).push([[9366],{85371:function(Y,v,e){e.r(v),e.d(v,{default:function(){return O}});var L=e(15009),o=e.n(L),B=e(97857),h=e.n(B),U=e(99289),m=e.n(U),Z=e(5574),A=e.n(Z),C=e(87547),T=e(94149),N=e(40427),p=e(5966),P=e(63434),l=e(90905),j=e(14670),R=e(12461),x=e(67294),w=e(73935),c={container:"container___REQAy",content:"content___IkUx1",icon:"icon___fqAhh"},$=e(60253),z=e(19084),y=e(91978),E=e(73049),n=e(85893),G=function(u){var g=u.content;return(0,n.jsx)(j.Z,{style:{marginBottom:24},message:g,type:"error",showIcon:!0})},H=function(){var u=(0,x.useState)(""),g=A()(u,2),S=g[0],D=g[1],F=(0,l.useModel)("@@initialState"),f=F.initialState,Q=F.setInitialState,I=(0,l.useIntl)(),V=function(){var d=m()(o()().mark(function t(){var s,r;return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,f==null||(s=f.fetchUserInfo)===null||s===void 0?void 0:s.call(f);case 2:r=a.sent,r&&(0,w.flushSync)(function(){Q(function(X){return h()(h()({},X),{},{currentUser:r})})});case 4:case"end":return a.stop()}},t)}));return function(){return d.apply(this,arguments)}}(),J=function(){var d=m()(o()().mark(function t(s){var r;return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,$.d.login(s);case 3:if(r=a.sent,r.status!=1){a.next=7;break}return D(r.msg),a.abrupt("return");case 7:return(0,z.o)(r.data.token,s.autoLogin),a.next=10,V();case 10:window.location.href=window.slowAdminConfig.loginSuccessRedirect,a.next=17;break;case 13:a.prev=13,a.t0=a.catch(0),console.log(a.t0),R.ZP.error("\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01");case 17:case"end":return a.stop()}},t,null,[[0,13]])}));return function(s){return d.apply(this,arguments)}}(),K=(0,y.Hx)("logo"),W=(0,y.Hx)("app_name");return(0,n.jsx)("div",{className:c.content,children:(0,n.jsxs)(N.U,{logo:(0,n.jsx)("img",{alt:"logo",src:K}),title:W,subTitle:" ",initialValues:{autoLogin:!0},actions:[],onFinish:function(){var d=m()(o()().mark(function t(s){return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,J(s);case 2:case"end":return i.stop()}},t)}));return function(t){return d.apply(this,arguments)}}(),children:[S&&(0,n.jsx)(G,{content:S}),(0,n.jsx)(j.Z,{style:{marginBottom:24},message:"admin/admin",type:"success",showIcon:!0}),(0,n.jsx)(p.Z,{name:"username",fieldProps:{size:"large",prefix:(0,n.jsx)(C.Z,{className:c.prefixIcon})},placeholder:I.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"}),rules:[{required:!0,message:(0,n.jsx)(l.FormattedMessage,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),(0,n.jsx)(p.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,n.jsx)(T.Z,{className:c.prefixIcon})},placeholder:I.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801"}),rules:[{required:!0,message:(0,n.jsx)(l.FormattedMessage,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]}),(0,n.jsx)("div",{style:{marginBottom:24},children:(0,n.jsx)(P.Z,{noStyle:!0,name:"autoLogin",children:(0,n.jsx)(l.FormattedMessage,{id:"pages.login.rememberMe",defaultMessage:"\u8BB0\u4F4F\u6211"})})})]})})},O=(0,x.forwardRef)(function(M,u){return(0,n.jsx)("div",{className:c.container,style:{backgroundImage:"url(".concat(window.slowAdminConfig.loginBackground,")")},children:(0,n.jsx)(E.Z,{ref:u,duration:650,type:"top",children:(0,n.jsx)("div",{children:(0,n.jsx)(H,{})},location.pathname)})})})}}]);
