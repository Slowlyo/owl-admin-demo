"use strict";(self.webpackChunkslow_admin=self.webpackChunkslow_admin||[]).push([[9366],{56535:function(ea,Z,a){a.r(Z),a.d(Z,{default:function(){return Y}});var T=a(15009),u=a.n(T),$=a(97857),B=a.n($),P=a(99289),S=a.n(P),R=a(5574),y=a.n(R),w=a(87547),z=a(94149),E=a(40427),h=a(5966),H=a(63434),i=a(90905),O=a(14670),G=a(79841),V=a(12461),v=a(67294),D=a(73935),p={container:"container___REQAy",content:"content___IkUx1",icon:"icon___fqAhh"},U=a(60253),K=a(19084),C=a(91978),Q=a(73049),N={box:"box___TWwqL",captchaImage:"captchaImage___O6NK3"},e=a(85893),W=function(l){var d=(0,v.useState)(""),f=y()(d,2),L=f[0],x=f[1],c=(0,i.useIntl)(),j=function(){U.d.captcha().then(function(M){x(M.data.captcha_img),l.form.setFieldValue("sys_captcha",M.data.sys_captcha)})};return(0,v.useEffect)(function(){j()},[]),(0,e.jsxs)("div",{children:[(0,e.jsx)(h.Z,{name:"sys_captcha",hidden:!0}),(0,e.jsxs)("div",{className:N.box,children:[(0,e.jsx)(h.Z,{name:"captcha",fieldProps:{size:"large"},placeholder:c.formatMessage({id:"pages.login.captcha.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}),rules:[{required:!0,message:(0,e.jsx)(i.FormattedMessage,{id:"pages.login.captcha.required",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801!"})}]}),(0,e.jsx)("div",{className:N.captchaImage,children:(0,e.jsx)("img",{src:L,onClick:function(){return j()},alt:""})})]})]})},J=function(l){var d=l.content;return(0,e.jsx)(O.Z,{style:{marginBottom:24},message:d,type:"error",showIcon:!0})},X=function(){var l=(0,v.useState)(""),d=y()(l,2),f=d[0],L=d[1],x=(0,i.useModel)("@@initialState"),c=x.initialState,j=x.setInitialState,F=(0,i.useIntl)(),M=G.Z.useForm(),k=y()(M,1),A=k[0],b=function(){var m=S()(u()().mark(function t(){var r,o;return u()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,c==null||(r=c.fetchUserInfo)===null||r===void 0?void 0:r.call(c);case 2:o=g.sent,o&&(0,D.flushSync)(function(){j(function(s){return B()(B()({},s),{},{currentUser:o})})});case 4:case"end":return g.stop()}},t)}));return function(){return m.apply(this,arguments)}}(),q=function(){var m=S()(u()().mark(function t(r){var o,n;return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,U.d.login(r);case 3:if(n=s.sent,((o=n.data)===null||o===void 0?void 0:o.status)!=1){s.next=7;break}return L(n.data.msg),s.abrupt("return");case 7:return(0,K.o)(n.data.token,r.autoLogin),s.next=10,b();case 10:window.location.href=window.slowAdminConfig.loginSuccessRedirect,s.next=17;break;case 13:s.prev=13,s.t0=s.catch(0),console.log(s.t0),V.ZP.error("\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01");case 17:case"end":return s.stop()}},t,null,[[0,13]])}));return function(r){return m.apply(this,arguments)}}(),_=(0,C.Hx)("logo"),aa=(0,C.Hx)("app_name");return(0,e.jsx)("div",{className:p.content,children:(0,e.jsxs)(E.U,{form:A,logo:(0,e.jsx)("img",{alt:"logo",src:_}),title:aa,subTitle:" ",initialValues:{autoLogin:!0},actions:[],onFinish:function(){var m=S()(u()().mark(function t(r){return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,q(r);case 2:case"end":return n.stop()}},t)}));return function(t){return m.apply(this,arguments)}}(),children:[f&&(0,e.jsx)(J,{content:f}),(0,e.jsx)(h.Z,{name:"username",fieldProps:{size:"large",prefix:(0,e.jsx)(w.Z,{className:p.prefixIcon})},placeholder:F.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"}),rules:[{required:!0,message:(0,e.jsx)(i.FormattedMessage,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),(0,e.jsx)(h.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,e.jsx)(z.Z,{className:p.prefixIcon})},placeholder:F.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801"}),rules:[{required:!0,message:(0,e.jsx)(i.FormattedMessage,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]}),(0,C.Hx)("login_captcha")&&(0,e.jsx)(W,{form:A}),(0,e.jsx)("div",{style:{marginBottom:24},children:(0,e.jsx)(H.Z,{noStyle:!0,name:"autoLogin",children:(0,e.jsx)(i.FormattedMessage,{id:"pages.login.rememberMe",defaultMessage:"\u8BB0\u4F4F\u6211"})})})]})})},Y=(0,v.forwardRef)(function(I,l){return(0,e.jsx)("div",{className:p.container,style:{backgroundImage:"url(".concat(window.slowAdminConfig.loginBackground,")")},children:(0,e.jsx)(Q.Z,{ref:l,duration:650,type:"top",children:(0,e.jsx)("div",{children:(0,e.jsx)(X,{})},location.pathname)})})})}}]);
