"use strict";(self.webpackChunkslow_admin=self.webpackChunkslow_admin||[]).push([[9366],{85371:function(Y,m,e){e.r(m),e.d(m,{default:function(){return O}});var I=e(15009),o=e.n(I),L=e(97857),h=e.n(L),U=e(99289),v=e.n(U),B=e(5574),Z=e.n(B),A=e(87547),C=e(94149),T=e(40427),p=e(5966),N=e(63434),l=e(90905),P=e(14670),R=e(12461),j=e(67294),$=e(73935),g={container:"container___REQAy",content:"content___IkUx1",icon:"icon___fqAhh"},w=e(60253),z=e(19084),x=e(91978),E=e(73049),n=e(85893),G=function(u){var c=u.content;return(0,n.jsx)(P.Z,{style:{marginBottom:24},message:c,type:"error",showIcon:!0})},H=function(){var u=(0,j.useState)(""),c=Z()(u,2),S=c[0],D=c[1],y=(0,l.useModel)("@@initialState"),f=y.initialState,Q=y.setInitialState,F=(0,l.useIntl)(),V=function(){var d=v()(o()().mark(function t(){var r,s;return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,f==null||(r=f.fetchUserInfo)===null||r===void 0?void 0:r.call(f);case 2:s=a.sent,s&&(0,$.flushSync)(function(){Q(function(X){return h()(h()({},X),{},{currentUser:s})})});case 4:case"end":return a.stop()}},t)}));return function(){return d.apply(this,arguments)}}(),J=function(){var d=v()(o()().mark(function t(r){var s;return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,w.d.login(r);case 3:if(s=a.sent,s.status!=1){a.next=7;break}return D(s.msg),a.abrupt("return");case 7:return(0,z.o)(s.data.token,r.autoLogin),a.next=10,V();case 10:window.location.href=window.slowAdminConfig.loginSuccessRedirect,a.next=17;break;case 13:a.prev=13,a.t0=a.catch(0),console.log(a.t0),R.ZP.error("\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01");case 17:case"end":return a.stop()}},t,null,[[0,13]])}));return function(r){return d.apply(this,arguments)}}(),K=(0,x.Hx)("logo"),W=(0,x.Hx)("app_name");return(0,n.jsx)("div",{className:g.content,children:(0,n.jsxs)(T.U,{logo:(0,n.jsx)("img",{alt:"logo",src:K}),title:W,subTitle:" ",initialValues:{autoLogin:!0},actions:[],onFinish:function(){var d=v()(o()().mark(function t(r){return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,J(r);case 2:case"end":return i.stop()}},t)}));return function(t){return d.apply(this,arguments)}}(),children:[S&&(0,n.jsx)(G,{content:S}),(0,n.jsx)(p.Z,{name:"username",fieldProps:{size:"large",prefix:(0,n.jsx)(A.Z,{className:g.prefixIcon})},placeholder:F.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"}),rules:[{required:!0,message:(0,n.jsx)(l.FormattedMessage,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),(0,n.jsx)(p.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,n.jsx)(C.Z,{className:g.prefixIcon})},placeholder:F.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801"}),rules:[{required:!0,message:(0,n.jsx)(l.FormattedMessage,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]}),(0,n.jsx)("div",{style:{marginBottom:24},children:(0,n.jsx)(N.Z,{noStyle:!0,name:"autoLogin",children:(0,n.jsx)(l.FormattedMessage,{id:"pages.login.rememberMe",defaultMessage:"\u8BB0\u4F4F\u6211"})})})]})})},O=(0,j.forwardRef)(function(M,u){return(0,n.jsx)("div",{className:g.container,style:{backgroundImage:"url(".concat(window.slowAdminConfig.loginBackground,")")},children:(0,n.jsx)(E.Z,{ref:u,duration:650,type:"top",children:(0,n.jsx)("div",{children:(0,n.jsx)(H,{})},location.pathname)})})})}}]);
